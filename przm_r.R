pth='C:/Users/th/Dropbox/PRZM_R_MCMC'

con <- file(paste(pth,'/Out_Test/przm3.run', sep=""))
a=readLines(con)
a[1]=gsub('PRZM','sss ', a[1], fixed=TRUE)
writeLines(a,con)
close(con)

###############update the old input file################
con <- file(paste(pth,'/Output/MS1CTT-R_temp.INP', sep=""))
a_old=readLines(con)
a=readLines(con)
a[3]="*** GA CORN; Validation Title of input file  Existing"
a[6]="\"Sparks, GA; MLRA ???; Metfile: GA1LEVAP.MET"                              #R 2
a[10]="1.00E-000.00E-00       02.50E+01       1       1"                          #R 3
a[13]="       4"                                                                  #R 6
a[17]="1.00E-012.20E-015.20E-010.90E-01               3    1.20  134.00"          #R 7
a[20]="       1 0"                                                                #R 8
a[24]="       12.50E-017.10E+018.50E+01       1  77  70  740.00E+001.13E+02"      #R 9
a[27]="       1       2"                                                          #R 9A
a[30]="0908 0112"                                                                 #R 9B
a[32]=".200 .200"                                                                 #R 9C
a[34]=".170 .170"                                                                 #R 9D
a[36]="  70   77"                                                                 #R 9E ???
a[39]="       1"                                                                  #R 10
a[45]="  090892  311092  011292       1"                                          #R 11
a[52]="      25       1       0       0"                                          #R 13
a[55]="PESTICIDE R-2"                                                             #R 15
a[60]="  130892  0 2  0.0   0.5 0.99 0.00"                                        #R 16
a[61]="  240892  0 2  0.0   0.5 0.99 0.00"
a[62]="  030992  0 2  0.0   0.5 0.99 0.00"
a[63]="  140992  0 2  0.0   0.5 0.99 0.00"
a[64]="  240992  0 2  0.0   0.5 0.99 0.00"
a[65]="  250992  0 2  0.0   0.5 0.99 0.00"
a[66]="  260992  0 2  0.0   0.5 0.99 0.00"
a[67]="  270992  0 2  0.0   0.5 0.99 0.00"
a[68]="  280992  0 2  0.0   0.5 0.99 0.00"
a[69]="  290992  0 2  0.0   0.5 0.99 0.00"
a[70]="  300992  0 2  0.0   0.5 0.99 0.00"
a[71]="  011092  0 2  0.0   0.5 0.99 0.00"
a[72]="  021092  0 2  0.0   0.5 0.99 0.00"
a[73]="  031092  0 2  0.0   0.5 0.99 0.00"
a[74]="  051092  0 2  0.0   0.5 0.99 0.00"
a[75]="  061092  0 2  0.0   0.5 0.99 0.00"
a[76]="  071092  0 2  0.0   0.5 0.99 0.00"
a[77]="  081092  0 2  0.0   0.5 0.99 0.00"
a[78]="  091092  0 2  0.0   0.5 0.99 0.00"
a[79]="  101092  0 2  0.0   0.5 0.99 0.00"
a[80]="  111092  0 2  0.0   0.5 0.99 0.00"
a[81]="  121092  0 2  0.0   0.5 0.99 0.00"
a[82]="  131092  0 2  0.0   0.5 0.99 0.00"
a[83]="  141092  0 2  0.0   0.5 0.99 0.00"
a[84]="  151092  0 2  0.0   0.5 0.99 0.00"
a[88]="0.00E+00       31.00E+00"                                                  #R 17
a[90]="*** Record 18: (3F8.0) PLVKRT,PLDKRT,FEXTRC for PESTICIDE R-2"
a[91]="0.00E+001.40E-011.00E-01"                                                  #R 18
a[94]="//Soils Title  --         Series: Kershaw    Txt: Fine Sandy Loam "        #R 19
a[98]="3.80E+02           0   0   0   0   0   0   0   0   0"                      #R 20
a[101]="4.30E+032.00E-062.00E+01"                                                 #R 26
a[104]="      11"                                                                 #R 33
a[107]="       11.00E+011.60E+008.90E-020.00E+000.00E+000.00E+00"                 #R 34-1
a[110]="        8.66E-028.66E-020.00E+00"                                         #R 36-1
a[113]="        1.00E-018.90E-024.00E-024.20E-011.76E-01"                         #R 37-1

a[116]="       25.00E+001.60E+008.90E-020.00E+000.00E+000.00E+00"                 #R 34-2
a[119]="        8.66E-028.66E-020.00E+00"                                         #R 36-2
a[122]="        1.00E+008.90E-024.00E-024.20E-011.76E-01"                         #R 37-2

a[125]="       31.50E+011.60E+008.40E-020.00E+000.00E+000.00E+00"                 #R 34-3
a[128]="        8.66E-028.66E-020.00E+00"                                         #R 36-3
a[131]="        1.00E+008.40E-023.90E-023.20E-011.34E-01"                         #R 37-3

a[134]="       41.50E+011.60E+008.20E-020.00E+000.00E+000.00E+00"                 #R 34-4
a[137]="        8.66E-028.66E-020.00E+00"                                         #R 36-4
a[140]="        1.00E+008.20E-023.70E-022.40E-011.01E-01"                         #R 37-4

a[143]="       53.00E+011.60E+008.20E-020.00E+000.00E+000.00E+00"                 #R 34-5
a[146]="        4.33E-024.33E-020.00E+00"                                         #R 36-5
a[149]="        1.00E+008.20E-023.50E-022.00E-018.40E-02"                         #R 37-5

a[152]="       61.50E+011.60E+008.00E-020.00E+000.00E+000.00E+00"                 #R 34-6
a[155]="        4.33E-024.33E-020.00E+00"                                         #R 36-6
a[158]="        1.00E+008.00E-023.40E-021.50E-016.30E-02"                         #R 37-6

a[161]="       73.00E+011.60E+007.70E-020.00E+000.00E+000.00E+00"                 #R 34-7
a[164]="        2.89E-022.89E-020.00E+00"                                         #R 36-7
a[167]="        1.00E+007.70E-023.40E-021.20E-015.00E-02"                         #R 37-7

a[170]="       81.50E+011.60E+007.60E-020.00E+000.00E+000.00E+00"                 #R 34-8
a[173]="        2.89E-022.89E-020.00E+00"                                         #R 36-8
a[176]="        1.00E+007.60E-023.30E-021.30E-015.50E-02"                         #R 37-8

a[179]="       91.50E+011.60E+008.10E-020.00E+000.00E+000.00E+00"                 #R 34-9
a[182]="        2.89E-022.89E-020.00E+00"                                         #R 36-9
a[185]="        1.00E+008.10E-023.60E-022.30E-019.70E-02"                         #R 37-9

a[188]="      105.00E+011.60E+008.10E-020.00E+000.00E+000.00E+00"                 #R 34-10
a[191]="        2.89E-022.89E-020.00E+00"                                         #R 36-10
a[194]="        1.00E+008.10E-023.60E-022.30E-019.70E-02"                         #R 37-10

a[197]="      111.80E+021.60E+008.10E-020.00E+000.00E+000.00E+00"                 #R 34-11
a[200]="        2.89E-022.89E-020.00E+00"                                         #R 36-11
a[203]="        2.00E+008.10E-023.60E-022.30E-019.70E-02"                         #R 37-11

a[206]="       0       0"                                                         #R 40
a[209]="    WATR    YEAR       1    PEST    YEAR       1    CONC    YEAR       1   0"  #R 42
a[212]="      12     DAY"                                                              #R 45

con1 <- file(paste(pth,'/Output/GA1L_2PA.INP', sep=""))
writeLines(a,con1)
close(con1)




#######update input file at certain locations#######################

con <- file(paste(pth,'/Out_Test/MS1CTT-R.INP', sep=""))
a=readLines(con)

#pestcide decay rate (d-1)
PLDKRT=-log(0.5)/10^(rbeta(1, 4.00, 9.92)/3.37) 
a[132]=paste(substr(a[132],1,8),sprintf("%8.2E", PLDKRT),substr(a[132],17,24),sep="")

#Rooting Depth(cm)
CORED=runif(1, min=32, max=90)
a[139]=paste(sprintf("%8.2E", CORED),substr(a[139],9,52),sep="")

#Curve number ###USE GA1R ########
CN_f=round(runif(1, min=82, max=88),0) #Curve number fallow
CN_c=round(runif(1, min=73, max=91),0) #Curve number cropping
CN_r=round(runif(1, min=75, max=81),0) #Curve number resudial
a[24]=paste(substr(a[24],1,42), CN_f,"  ", CN_c, "  ", CN_r,substr(a[24],53,68),sep="")

###Partition coefficient ########
Num=substr(a[145],8,8)
Kd=runif(Num, min=0.250, max=0.360)
row_0=154

for (i in 1:Num){
  row_t=row_0+(i-1)*9
  a[row_t]=paste(substr(a[row_t],1,40), sprintf("%8.2E", Kd[i]), sep="")
}

####Bulk density###############
BD=runif(1, min=1.49, max=1.56)

#######Pan factor##############
PFAC=runif(1, min=0.75, max=0.77)
a[10]=paste(sprintf("%8.2E", PFAC),substr(a[10],9,68), sep="")

#######Application rate########
Num_Tapp=substr(a[88],1,8)
Num_Tapp=as.integer(Num_Tapp)
row_0=96
TAPP=runif(Num_Tapp, min=0.15, max=0.32)#one application for all or different
for (i in 1:Num_Tapp){
  row_t=row_0+(i-1)*1
  a[row_t]=paste(substr(a[row_t],1,18), sprintf("%5.3f", TAPP[i]), substr(a[row_t],24,34), sep="")
}




